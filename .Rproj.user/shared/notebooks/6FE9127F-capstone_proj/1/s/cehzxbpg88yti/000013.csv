"0","### Static map showing bi-color of CORP_ adopted by states for after 2020 "
"0","summary(df3)"
"1",""
"1","      YEAR     "
"1","  STATE_CODE       "
"1","       DD       "
"1","     T_YEAR    "
"1","
"
"1"," Min.   :1968  "
"1"," Length:1428       "
"1"," Min.   :0.000  "
"1"," Min.   :1867  "
"1","
"
"1"," 1st Qu.:1982  "
"1"," Class :character  "
"1"," 1st Qu.:0.000  "
"1"," 1st Qu.:1989  "
"1","
"
"1"," Median :1995  "
"1"," Mode  :character  "
"1"," Median :0.000  "
"1"," Median :1993  "
"1","
"
"1"," Mean   :1995  "
"1","                   "
"1"," Mean   :0.388  "
"1"," Mean   :1999  "
"1","
"
"1"," 3rd Qu.:2008  "
"1","                   "
"1"," 3rd Qu.:1.000  "
"1"," 3rd Qu.:2023  "
"1","
"
"1"," Max.   :2022  "
"1","                   "
"1"," Max.   :1.000  "
"1"," Max.   :2023  "
"1","
"
"0","# Filter dataset to only include years after 2020"
"0","df_corp <- df3 %>%"
"0","  filter(YEAR > 2020) %>%"
"0","  group_by(STATE_CODE)"
"0",""
"0","# Aggregate data to determine the highest CORP_ status per state (i.e., if a state ever adopted the ban)"
"0","# df_map <- df1 %>%"
"0","#   group_by(STATE_CODE) %>%"
"0","#   summarise(CORP_status = max(CORP_, na.rm = TRUE))  # If at any point CORP_ was 1, assign 1"
"0",""
"0",""
"0","#### Adding maps to dataset "
"0","# install.packages(""maps"")"
"0","library(maps)"
"2","
Attaching package: ‘maps’

"
"2","The following object is masked from ‘package:viridis’:

    unemp

"
"0","# Define color palette"
"0","## Already done as brand color"
"0",""
"0","us_states <- map_data(""state"")  # Built-in state map"
"0",""
"0","# Convert state names to lowercase for merging"
"0","us_states$region <- tolower(us_states$region)"
"0",""
"0","# Create a lookup table for state abbreviations and full names"
"0","state_lookup <- data.frame(STATE_CODE = state.abb, region = tolower(state.name))"
"0",""
"0","# Merge df_map with full state names"
"0","df_corp <- left_join(df_corp, state_lookup, by = ""STATE_CODE"")"
"0",""
"0","## STATE_CODE has 51 states DC is counted as a state, but shows up as NA in region"
"0","## recoded region's NAs to be DC, dc"
"0","unique(df_corp$STATE_CODE)"
"1"," [1]"
"1"," ""AK"""
"1"," ""AL"""
"1"," ""AR"""
"1"," ""AZ"""
"1"," ""CA"""
"1"," ""CO"""
"1"," ""CT"""
"1"," ""DC"""
"1"," ""DE"""
"1"," ""FL"""
"1"," ""GA"""
"1"," ""HI"""
"1"," ""IA"""
"1"," ""ID"""
"1"," ""IL"""
"1","
"
"1","[16]"
"1"," ""IN"""
"1"," ""KS"""
"1"," ""KY"""
"1"," ""LA"""
"1"," ""MA"""
"1"," ""MD"""
"1"," ""ME"""
"1"," ""MI"""
"1"," ""MN"""
"1"," ""MO"""
"1"," ""MS"""
"1"," ""MT"""
"1"," ""NC"""
"1"," ""ND"""
"1"," ""NE"""
"1","
"
"1","[31]"
"1"," ""NH"""
"1"," ""NJ"""
"1"," ""NM"""
"1"," ""NV"""
"1"," ""NY"""
"1"," ""OH"""
"1"," ""OK"""
"1"," ""OR"""
"1"," ""PA"""
"1"," ""RI"""
"1"," ""SC"""
"1"," ""SD"""
"1"," ""TN"""
"1"," ""TX"""
"1"," ""UT"""
"1","
"
"1","[46]"
"1"," ""VA"""
"1"," ""VT"""
"1"," ""WA"""
"1"," ""WI"""
"1"," ""WV"""
"1"," ""WY"""
"1","
"
"0","unique(df_corp$region)"
"1"," [1]"
"1"," ""alaska""        "
"1"," ""alabama""       "
"1"," ""arkansas""      "
"1"," ""arizona""       "
"1","
"
"1"," [5]"
"1"," ""california""    "
"1"," ""colorado""      "
"1"," ""connecticut""   "
"1"," NA              "
"1","
"
"1"," [9]"
"1"," ""delaware""      "
"1"," ""florida""       "
"1"," ""georgia""       "
"1"," ""hawaii""        "
"1","
"
"1","[13]"
"1"," ""iowa""          "
"1"," ""idaho""         "
"1"," ""illinois""      "
"1"," ""indiana""       "
"1","
"
"1","[17]"
"1"," ""kansas""        "
"1"," ""kentucky""      "
"1"," ""louisiana""     "
"1"," ""massachusetts"" "
"1","
"
"1","[21]"
"1"," ""maryland""      "
"1"," ""maine""         "
"1"," ""michigan""      "
"1"," ""minnesota""     "
"1","
"
"1","[25]"
"1"," ""missouri""      "
"1"," ""mississippi""   "
"1"," ""montana""       "
"1"," ""north carolina"""
"1","
"
"1","[29]"
"1"," ""north dakota""  "
"1"," ""nebraska""      "
"1"," ""new hampshire"" "
"1"," ""new jersey""    "
"1","
"
"1","[33]"
"1"," ""new mexico""    "
"1"," ""nevada""        "
"1"," ""new york""      "
"1"," ""ohio""          "
"1","
"
"1","[37]"
"1"," ""oklahoma""      "
"1"," ""oregon""        "
"1"," ""pennsylvania""  "
"1"," ""rhode island""  "
"1","
"
"1","[41]"
"1"," ""south carolina"""
"1"," ""south dakota""  "
"1"," ""tennessee""     "
"1"," ""texas""         "
"1","
"
"1","[45]"
"1"," ""utah""          "
"1"," ""virginia""      "
"1"," ""vermont""       "
"1"," ""washington""    "
"1","
"
"1","[49]"
"1"," ""wisconsin""     "
"1"," ""west virginia"" "
"1"," ""wyoming""       "
"1","
"
"0","df_corp$region <- if_else(is.na(df_corp$region), ""dc"", df_corp$region)"
"0",""
"0","unique(us_states$region)"
"1"," [1]"
"1"," ""alabama""             "
"1"," ""arizona""             "
"1"," ""arkansas""            "
"1","
"
"1"," [4]"
"1"," ""california""          "
"1"," ""colorado""            "
"1"," ""connecticut""         "
"1","
"
"1"," [7]"
"1"," ""delaware""            "
"1"," ""district of columbia"""
"1"," ""florida""             "
"1","
"
"1","[10]"
"1"," ""georgia""             "
"1"," ""idaho""               "
"1"," ""illinois""            "
"1","
"
"1","[13]"
"1"," ""indiana""             "
"1"," ""iowa""                "
"1"," ""kansas""              "
"1","
"
"1","[16]"
"1"," ""kentucky""            "
"1"," ""louisiana""           "
"1"," ""maine""               "
"1","
"
"1","[19]"
"1"," ""maryland""            "
"1"," ""massachusetts""       "
"1"," ""michigan""            "
"1","
"
"1","[22]"
"1"," ""minnesota""           "
"1"," ""mississippi""         "
"1"," ""missouri""            "
"1","
"
"1","[25]"
"1"," ""montana""             "
"1"," ""nebraska""            "
"1"," ""nevada""              "
"1","
"
"1","[28]"
"1"," ""new hampshire""       "
"1"," ""new jersey""          "
"1"," ""new mexico""          "
"1","
"
"1","[31]"
"1"," ""new york""            "
"1"," ""north carolina""      "
"1"," ""north dakota""        "
"1","
"
"1","[34]"
"1"," ""ohio""                "
"1"," ""oklahoma""            "
"1"," ""oregon""              "
"1","
"
"1","[37]"
"1"," ""pennsylvania""        "
"1"," ""rhode island""        "
"1"," ""south carolina""      "
"1","
"
"1","[40]"
"1"," ""south dakota""        "
"1"," ""tennessee""           "
"1"," ""texas""               "
"1","
"
"1","[43]"
"1"," ""utah""                "
"1"," ""vermont""             "
"1"," ""virginia""            "
"1","
"
"1","[46]"
"1"," ""washington""          "
"1"," ""west virginia""       "
"1"," ""wisconsin""           "
"1","
"
"1","[49]"
"1"," ""wyoming""             "
"1","
"
"0","  "
"0","# Merge with map data"
"0","us_states <- left_join(us_states, df_corp, by = ""region"")"
"0",""
"0",""
"0","color_palette <- list(yellow = ""#e5de54"", # not adopted "
"0","                   dark_gray = ""#808c73"") # adopted"
"0","map_color_palette <- c(""0"" = color_palette$yellow, ""1"" = color_palette$dark_gray)"
"0","# summary(us_states)"
"0","# modelsummary::datasummary_skim(us_states, type = ""all"")"
"0",""
"0","# ggplot() +"
"0","#   geom_polygon(data = us_states, aes(x = long, y = lat, group = group, fill = as.factor(DD)), "
"0","#                color = brand_colors$dark_gray, size = 0.3) +  #dark_gray border for state separation"
"0","#    # Assign specific colors to each Race category"
"0","#   scale_color_manual("
"0","#     values = c("
"0","#       ""Not Adopted"" = brand_colors$yellow, "
"0","#       ""Adopted"" = brand_colors$sage, "
"0","#     )"
"0","#   ) +"
"0","#   "
"0","#   theme_brand() + "
"0","#   labs("
"0","#     title = ""Out of School Suspension Rates over 50 Years by Race"","
"0","#     x = ""Year"","
"0","#     y = ""Suspension Rates (%)"""
"0","#   )"
"0",""
"0","### Combine DC and Virginia for now"
"0",""
"0",""
